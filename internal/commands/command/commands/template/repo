package repository

import (
	"fmt"

	"github.com/gandarfh/maid-san/external/database"
	"gorm.io/gorm"
)

type {{commandName}} struct {
	gorm.Model
}

type {{commandName}}Repo struct {
	Sql *gorm.DB
}

func New{{commandName}}Repo() (*{{commandName}}Repo, error) {
	db, err := database.SqliteConnection()
	db.AutoMigrate(&{{commandName}}{})

	if err != nil {
		return nil, err
	}

	return &{{commandName}}Repo{
		Sql: db,
	}, nil
}

func (repo *{{commandName}}Repo) Create(value *{{commandName}}) {
	repo.Sql.Create(value)
}

func (repo *{{commandName}}Repo) List() *[]{{commandName}} {
  output := []{{commandName}}{}
	repo.Sql.Find(&output)

	return &output
}
